%%TODO:Пометка о возможно установки самоконфликтующих пакетов.
%%TODO: средства для управления набором подключённых репозиториев
%%TODO:восстановление системы после установки пакетов для временного использования.

\section{Общие требования}

Система для~управления \EN{rpm}-пакетами должна состоять из~нескольких отдельных утилит,
набор которых детально описывается в~последующих главах.
При~этом существует ряд общих требований, предъявляемых к~любому приложению из~всего множества.
Ниже приводится их~подробный перечень.

\begin{description}

\item[Поддержка протоколирования.]
Любая операция, приводящая к~изменению состояния системы, 
должна поддерживать развёрнутое протоколирование всех совершаемых  действий.
Накапливаемый журнал необходимо снабжать как пометками, облегчающими чтение и поиск данных системным администратором,
так и машинночитаемой информацией с~целью обеспечения автоматизированной возможности 
возврата ОС к~предыдущему состоянию в~случае неудачного завершения транзакции. 
Записи должны разделяться по~степени критичности содержания 
(уровни ``отладка'', ``основная информация'', ``ошибка'', ``критическая ошибка'').
Для~всех утилит требуется наличие ключа \CODE{--verbose},
 повышающего детальность информации,
выводимой на~стандартный поток вывода.

\item [Поддержка локализации.]
Система должна поддерживать механизм перевода интерактивных сообщений на~национальные языки.
Требование локализации не~распространяется на~службу протоколирования и утилиту построения индекса репозитория.

\item[Поддержка средств контроля за~искажением информации.]
Конечный пользователь системы должен иметь возможность выполнять проверку контрольной суммы и цифровой подписи 
для~множества пакетов, полученных из~удалённых репозиториев, и для~служебной информации о~них.
Контроль необходимо выполнять на~основе цифровой подписи   автора  автоматически  во~время работы.
При~обнаружении ошибки требуется уведомить об~этом пользователя и добавить соответствующую информацию в~журнал.
Уведомление должно указывать, обнаружено~ли только несовпадение контрольной суммы, 
найдена~ли неправильная цифровая подпись или подпись выполнена неизвестным (просроченным) ключом.

\item[Минимизация риска аварийного завершения операции.]
При~любой операции, предполагающей внесенеи изменений в~состояние ОС, необходимо предварительно 
провести максимально доступное количество проверок с~целью предотвращения неуспешного результата работы.
Начало модификации системы допускается только в~случае, если все~необходимые данные доставлены на~локальный компьютер,
проверена их~целостность, устранена возможность файловых конфликтов (см.~гл.~\ref{pkgstruct}), и доступно достаточное количество свободного дискового пространства.

\item[Поддержка параллельных вычислений.]
Все~операции, предполагающие высокую вычислительную нагрузку на~процессор,
по~мере возможности должны поддерживать параллельный режим работы.
Разделение общей задачи на~несколько процессов или потоков позволит задействовать несколько ядер в~многоядерных системах,
что способно значительно ускорить получение результата. 
Желательно, чтобы количество процессов или потоков в~вычислении не~превышало физическое количество ядер системы.
Это требование не~распространяется на~процедуру загрузки данных по~сети.

\item[Кэширование данных из~удалённых источников.]
При~загрузке пакетов для~установки из~удалённых репозиториев в~сети
полученные файлы должны сохраняться в~специально отведённом каталоге на~случай повторного использования.
При~этом требуется наличие конфигурационных параметров, задающих положение каталога для~хранения в~системе и его максимальной размер.
При~превышении заданного порога размера кэша пакеты необходимо удалять с~учётом давности последнего обращения.

\end{description}

\section{Основные операции}

Основное содержание этой главы представляет описание операций, производящих изменение в~состоянии ОС.
Назначение  изменений определяется командой пользователя, но общий порядок работы у~всех операций одинаковый.
Он состоит из~следующих этапов:

\begin{enumerate}

\item{
Анализ команды пользователя, просмотр загруженной индексной информации о~подключённых репозиториях
и поиск решения, представленного в~виде списков пакетов для~установки, для~обновления и для~удаления.
}

\item {Загрузка необходимых пакетов из~удалённых репозиториев.}
\item {Внесение изменений в~ОС.}

\end{enumerate}

Реализация каждой команды должна содержать чёткое разделение приведённых этапов,
позволяя пропускать или отменять любой из~них, кроме первого.
Требуется оснастить реализацию механизмом вызова внешних обработчиков завершения каждого этапа.
Результат их~работы должен указывать на~необходимость продолжения или отмены дальнейших действий.

Зависимости, указанные как необходимые только для~выполнения дополнительных скриптов установки/удаления пакета,
удовлетворяются при~работе соответствующих операций.
Установленные таким образом дополнительные пакеты после завершения внесения изменений из~ОС не~удаляются автоматически,
но могут быть удалены вручную.

\subsection{Операция установки и обновления пакетов}

Операции установки и обновления пакетов имеют единый интерфейс пользователя.
В~качестве основного параметра указывается множество пакетов, каждый из~которых может быть  задан одним из~следующих способов:

\begin{itemize}
\item {по~имени;}
\item {по~имени с~ограничением версии, включая возможность даунгрейда;}
\item {по~ссылке на~файл пакета, включая возможность загрузки из~сети;}
\item{по~одному из \EN{provides} пакета (см.~гл.~\ref{pkgstruct}), включая возможность указания ограничения версии.}
\end{itemize}

При~указании более одного пакета операция отменяется полностью для~\underline{всех} пакетов, 
если обнаружена проблема установки хотя~бы одного из~них.
При~вызове операции необходимо наличие возможности запрета пользователем рассмотрения решений, 
включающих установку некоторого пакета. 
Предполагается, что два~пакета с~одинаковыми именами, эпохами, версиями, релизами и отметками времени их~создания являются одним и~тем~же пакетом.
Конкретный пакет для~установки выбирается на~основе параметров приоритета репозитория, в~котором  он расположен (см.~гл.~\ref{repo}).
Только в~случае указания точной версии или имени файла происходит однозначный выбор пакета для~установки.
В~противном случае операция производит выбор подходящего варианта в~соответствии с~правилами, описаными ниже.

При~указании множества пакетов для~установки или обновления  допускается возможность использования регулярных выражений.
С~этой целью требуется наличие аргумента командной строки,  
разрешающего обработку ввода пользователя как~регулярного выражения,
а~также определяющего,  должны~ли регулярные выражения обрабатываться на~множестве имён пакетов или с~учётом известного списка всех \EN{provides}.
Все~обнаруженные допустимые подстановки передаются на~вход операции так, как если~бы пользователь сделал перечисление вручную.

В~стандартном поведении операция должна производить поиск решений с~учётом экономии дискового пространства пользователя. 
Дополнительно требуется наличие параметра командной строки, запрещающего удаление уже~установленных пакетов из~системы. 

\subsubsection{Порядок выбора пакета по~явному запросу}
%%Материал этого раздела реализован в классе TaskPreprocessor;

При~установке пакета, перечисленного в~команде пользователя, поиск подходящего кандидата ведётся следующим образом:

\begin{enumerate}

\item {
Если пользователь указал имя файла или запросил установку на~основе \EN{URL},
то устанавливается запрошенный пакет без~рассмотрения дополнительных вариантов, описанных ниже.
Если запрошенный пакет уже установлен, но установленная версия новее запрошенной,
то операция не~отменяется.
}

\item {
Если существует пакет, имя которого точно соответствует запрошенному, то выбирается его самая свежая версия, удовлетворяющая ограничениям. 
Прочие варианты, описанные ниже, не~рассматриваются.
%%RFC: Реализация переходит к~обработке provides также в~случае существования пакета, но при~наличии невыполнимых ограничений версий.
}

\item {
Если существуют только пакеты, подходящие под~запрос на~основе записей \EN{provides},
то выбирается только один из~них следующим образом:
}

\begin{itemize}

\item {
если пользователь наложил ограничение версии, то рассматриваются только пакеты,
соответствующие записи \EN{provides} в~которых содержат информацию о~версии.
Из~полученного списка выбирается пакет, запись \EN{provides} которого имеет самую свежую версию.
Если таких пакетов несколько, то выбор производится на~основе предустановленного списка предпочтений (см.~гл.~\ref{advfeatures})
или, если записи в~списке предпочтений нет, 
путём выбора последнего элемента в~списке имён пакетов после сортировки по~возрастанию;
}

\item {
если пользователь ограничения версии не~наложил, но все подходящие записи \EN{provides} имеют информацию о~версии,
выбор осуществляется таким~же способом, как описано в~предыдущем пункте;
}

\item {
если пользователь ограничения версии не~наложил, и не~все подходящие записи \EN{provides} имеют информацию о~версии,
то выбор производится на~основе предустановленного списка предпочтений или, 
если запись в~списке предпочтений отсутствует, путём выбора последнего элемента в~списке имён пакетов после сортировки по~возрастанию.
}

\end{itemize}
\end{enumerate}

\subsubsection{Порядок выбора пакета при~разрешении \EN{requires}}

При~установке пакетов в~рамках обработки зависимостей требуется  просмотр известного множества записей \EN{obsoletes}.
При~этом требуемый пакет может быть заменён на~пакет с~соответствующей записью \EN{obsoletes} по~следующим правилам:

\begin{enumerate}

\item {
Замена производится только в~случае, если пакет не~установлен или ограничение версии в~записи \EN{requires} не~соответствует версии установленного пакета.
При~этом рассматриваются только реальные имена пакетов и их~версий без~учёта имеющихся записей \EN{provides}.
}

\item {
Пакет с~записью \EN{obsoletes} должен содержать также запись \EN{provides},
в~которой имя пакета совпадает с~именем пакета в~записи \EN{obsoletes}.
Если запись \EN{provides} отсутствует, запись \EN{obsoletes} пропускается\footnote 
{
Предполагается, что под действие записи \EN{obsoletes} попадают только реальные имена пакетов, но не записи \EN{provides}. 
В~противном случае, требования наличия одновременно записей \EN{obsoletes} и \EN{provides} будет приводить к~ситуации, в~которой пакеты обновляют сами себя.
}.
}

\item {
Если запись \EN{requires}, по~которой устанавливается пакет, содержит ограничение версии,
то запись \EN{provides} также должна содержать указание версии.
Если указания версии в~записи \EN{provides} нет или версия не~подходит под~требование \EN{requires} замена пакета не~допускается.
}

\item {
Если обнаружено несколько подходящих пакетов для~замены, то выбирается только один из~них на~основе записи \EN{provides},
как это описано ниже. 
}

\end{enumerate}

Если требуемый пакет уже установлен  (включая возможность наличия в~системе пакета с~подходящей записью \EN{provides}), и его версия соответствует требованию версии \EN{requires},
то никакие действия с~ним не~совершаются.
Если пакет не~установлен или его~версия является неподходящей, и не~производилась замена пакета на~основе записи \EN{obsoletes},
то выполняются следующие действия:

\begin{enumerate}

\item {
Если пакет уже установлен, его версия является неподходящей,
но подходящая версия доступна в~репозиториях, то производится его обновление.
}

\item {
Если пакет уже установлен, его версия является неподходящей, и все доступные версии также не~подходят,
то рассматривается множество пакетов на~основе \EN{provides} с~последующей установкой нового варианта.
Причём уже установленный пакет из~системы не~удаляется.
}

\item{
Если пакет не~установлен, но существует его~кандидат, имя которого соответствует заданному, ему отдаётся приоритет, и
 устанавливается  его~подходящая самая свежая версия.
Существующие пакеты, содержащие одноимённые \EN{provides}, не~рассматриваются.
}

\item {
Если запись \EN{requires} имеет ограничение версии, то рассматриваются только пакеты,
соответствующие записи \EN{provides} в~которых содержат информацию о~версии.
Из~полученного списка выбирается пакет, запись \EN{provides} которого имеет самую свежую версию.
Если таких пакетов несколько, то выбор производится на~основе предустановленного списка предпочтений (см.~гл.~\ref{advfeatures})
или, если записи в~списке предпочтений нет, 
путём выбора последнего элемента в~списке имён пакетов после сортировки по~возрастанию.
}

\item {
Если запись \EN{requires} не~имеет ограничений версии, но все подходящие записи \EN{provides} имеют информацию о~версии,
выбор осуществляется таким~же способом, как описано в~предыдущем пункте.
}

\item {
Если запись \EN{requires} не~имеет ограничений версии, и не~все подходящие записи \EN{provides} имеют информацию о~версии,
то выбор производится на~основе предустановленного списка предпочтений или, 
если запись в~списке предпочтений отсутствует, путём выбора последнего элемента в~списке имён пакетов после сортировки по~возрастанию.
}

\end{enumerate}

\subsection{Операция удаления пакетов}

При~выполнении операции удаления указывается множество пакетов для~обработки.
Допускается использование только настоящих имён пакетов, \EN{provides} не~рассматриваются.
Операция производит изменения, после которых ни~один из~указанных пакетов не~может присутствовать в~ОС,
но допускается установка дополнительных, если это требуется зависимостями. 
Ситуация вызова операции для~отсутствующего пакета ошибочной не~считается.

Для~увеличения точности определения желаемого результата требуется возможность указания пользователем 
необходимости  присутствия в~системе некоторого пакета после окончания работы.
Требуется наличие опции командной строки, запрещающей установку новых пакетов. 
Допускается использование регулярных выражений,
которые применяются к~именам (без~учёта \EN{provides}) всех установленных пакетов.

\subsection{Операция переустановки пакетов}

Операция переустановки одного или нескольких пакетов производится для~исправления повреждённой ОС.
В~ходе работы пакет удаляется и заново устанавливается, сохраняя версию.
При~отсутствии необходимого пакета в~кэше производится  его~загрузка из~доступных репозиториев.

\subsection{Операция обновления ОС}

Операция обновления ОС соответствует операции обновления пакетов с~указанием множества имён всех~установленных пакетов.
Сохраняется возможность пробного запуска работы только с~выводом списка изменений на~поток стандартного вывода или с~загрузкой пакетов из~репозиториев в~сети.
В~случае обнаружения невозможности выполнения операции пользователю необходимо предоставить подробный отчёт с~описанием проблемы и предложить сделать дополнительные указания для~её~разрешения.

\subsection{Операция исправления целостности ОС}

Операция контроля целостности ОС должна выполнить  для~каждого пакета  проверку удовлетворения его~зависимостей и конфликтов с~другими пакетами.
Процедуру исправления найденных ошибок требуется выполнять следующим образом:

\begin{enumerate}

\item {
Для~каждой пары конфликтующих пакетов пользователю необходимо предоставить запрос для~выбора пакета для~удаления из~ОС.
}

\item {
Дополнить список пакетов для~удаления списком пакетов для~установки,
добавляя в~него все неудовлетворённые зависимости.
}

\item {
Запустить операцию  исправления ошибок, 
причём в~ходе работы должны одновременно учитываться и пакеты для~установки, и пакеты для~удаления.
В~случае невозможности нахождения решения пользователю необходимо предоставить подробное описание проблемы с~предложением установить или удалить часть пакетов вручную,
после чего повторить операцию исправления целостности.
}

\end{enumerate}

\subsection{Дополнительные возможности}
\label{advfeatures}

Требуется наличие ряда возможностей, модифицирующих поведение операций, изменяющих состояние ОС.
Они подразумевают указание пользователем дополнительной информации,
которая должна сохраняться в~конфигурационных файлах. 

\begin{description}

\item[Указание приоритетов разрешения \EN{provides}.]
Пользователь должен иметь возможность составления списка приоритетного выбора пакетов при~разрешении \EN{provides}.
Выбирается первый элемент, доступный для~установки.
В~случае ошибки оставшиеся элементы не~просматриваются,
даже если с~их~использованием существует допустимое решение\footnote{
Ограничение вызвано чрезмерной трудоёмкостью алгоритма поиска замыкания на~основе \EN{SAT~solver}.
}.

\item[Указание списка пакетов для~удержания.]
Пользователь должен иметь возможность указания списков пакетов,
для~которых запрещаются операции установки, обновления или удаления.
Три списка должны быть раздельными и храниться в~конфигурационных файлах системы, 
допуская использование регулярных выражений.
В~случае явного указания пользователем выполнить операцию, противоречащую содержимому одного из~списков, необходимо выдать запрос на~подтверждение продолжения работы. 

\item[Указание списка ``важных'' пакетов.]
Пользователь или администратор должен иметь возможность определения списка пакетов, 
удаление которых приводит ОС в~неработоспособное состояние.
Пакеты из~указанного списка не~могут удаляться в~ходе поиска решений, а в~случае явного указания их~пользователем в~операции удаления
необходимо запросить подтверждение, что пользователь понимает риск и последствия удаления запрошенного пакета.

\end{description}

\section{Информационные операции}

Наряду с~операциями, предполагающими внесение изменений в~ОС,
необходимо наличие нескольких информационных операций,
предоставляющих различные данные по~запросу пользователя.
Все~информационные операции должны выводить результат с~учётом всех имеющихся в~репозиториях пакетов,
а~не~ограничиваться множеством установленных.

\begin{description}

\item[Вывод подробной информации о~пакете.]
Пользователь должен иметь возможность получения подробной информации о~пакете,
включающей имя, версию (эпоху, версию и релиз), архитектуру, автора (\EN{packager}), \EN{URL} проекта,
лицензию, имя пакета с~исходными текстами, однострочное и развёрнутое описание.

\item[Поиск пакета.]
Пользователь должен иметь возможность поиска пакета по~его имени (включая обработку регулярных выражений)
по~однострочному описанию и подробному описанию, указывая, какие из~перечисленных полей необходимо просматривать.

\item[Поиск пакетов, предоставляющих некоторый \EN{provides}.]
Пользователь должен иметь возможность запроса списка всех пакетов,
содержащих указанный \EN{provides}.
При~запросе ограничения версии не~указывается,
но~система выводит список подходящих пакетов с~уточнением версии соответствующего \EN{provides}.

\item[Поиск нарушений целостности множества пакетов в~репозиториях.]
Пользователь должен иметь возможность анализа содержимого подключенных репозиториев и получения списка пакетов,
установка которых невозможна по~причине отсутствия пакетов, удовлетворяющих некоторые зависимости.
Список должен содержать имя пакета и соответствующую зависимость, порождающую ошибку.

\item[Вывод бинарных пакетов на~основе пакета с~исходными текстами.]
Пользователь должен иметь возможность получения списка пакетов,
которые были созданы путём сборки указанного пакета с~исходными текстами.
Требуется возможность указания нескольких пакетов с~исходными текстами одновременно.

\item[Вывод информации о~зависимостях и конфликтах пакета.]
Пользователь должен иметь возможность просмотра информации 
о всех зависимостях и конфликтах указанного пакета, дополненной перечислением пакетов, удовлетворяющих каждому пункту выводимых данных.
Требуется явно помечать зависимости, разрешение которых невозможно удовлетворить.

\item[Вывод зависимых пакетов.]
Пользователь должен иметь возможность просмотра списка пакетов, зависимых от~указанного.
Другими словами, требуется вывести все~пакеты, к~удалению которых приведёт удаление указанного.
Необходимо иметь возможность просмотреть как список пакетов, зависимых напрямую, 
так и список косвенно зависимых пакетов, т.~е. включая транзитивные замыкания.
Анализироваться должны только пакеты, установленные в~системе.

\item[Вывод информации о~зависимостях между репозиториями.]
Пользователь должен иметь возможность контроля 
целостности содержимого некоторого репозитория (каждый пакет может быть установлен в~систему без~подключения сторонних репозиториев)
и обнаружения необходимости   задействования пакетов из~других репозиториев. 

\end{description}

\section{Структура пакета}
\label{pkgstruct}

Описанные выше операции должны корректно обрабатывать структуру \EN{rpm}-пакетов и 
придерживаться основных принципов их~поведения во~время установки и удаления.
Информация о~версии пакета подразумевает наличие следующих компонентов:

\begin{itemize}
\item {Эпоха;}
\item{Версия;}
\item {Релиз.}
\end{itemize}

Эпоха представляет из~себя целое неотрицательное число. 
Версия и релиз могут быть произвольными наборами символов, за~исключением использования символа ``-''.
При~сравнении версии различных пакетов система должна использовать функцию \CODE{rpmRangesOverlap()} из~состава \EN{librpm}
и избегать собственной обработки. 
При~ссылке на~некоторую версию другого пакета указание эпохи и релиза необязательно,
что подразумевает их~произвольное значение.

Пакет может предоставлять функциональность других пакетов,
указывая информацию об~этом в тэге \EN{provides}.
Имя \EN{provides} допускает произвольное значение, не~обязательно совпадающее с~именем какого-либо существующего пакета
и является, скорее, соглашением, что пакет обладает некоторой совместимостью.
Для~\EN{provides}  допускается указание подмножества версии.
Неявными \EN{provides} считаются имена всех~файлов, хранимых в~пакете.

Следующие типы отношений допускаются на~множестве пакетов:

\begin{description}

\item[\EN{Requires}:]
пакет требует обязательное наличие другого пакета, указанного по~его имени или по~одному из~его \EN{provides}.
Допускается указание подмножества версии требуемого пакета.
В~случае указания ограничения версии под~\EN{requires} может подходить \EN{provides} только дополненный информацией о~версии.

\item[\EN{Conflicts}:]
пакет запрещает наличие другого пакета, указанного по~его имени или по~одному из~его \EN{provides}.
Допускается указание подмножества версии конфликтуемого пакета.
В~случае указания ограничения версии под~\EN{conflicts} может подходить \EN{provides} только дополненный информацией о~версии.

\item[\EN{Obsoletes}:]
Пакет может указывать, что является обновлением некоторого множества пакетов.
При~установке такого пакета все пакеты, обновлением которых он~является, удаляются из~ОС.
Попытка их~установки после установки обновляющего пакета приводит к~ошибки типа ``установлена более свежая версия''.
Допускается указание подмножества версии обновляемых пакетов.
В~случае указания ограничения версии под~\EN{obsoletes} может подходить \EN{provides} только дополненный информацией о~версии.

\end{description}

Установка двух пакетов является невозможной, если для~них обнаружены файловые конфликты.
Файловыми конфликтами считаются:

\begin{itemize}

\item {
хранение файлов с~одинаковыми именами, но~с~различной \EN{md5}-суммой или с~различными атрибутами 
(права доступа, идентификаторы владельца и группы, отметка времени создания);
}

\item {
хранение каталогов с~одинаковыми именами, но с~разными атрибутами 
(права доступа, идентификаторы владельца и группы, отметка времени создания).
}

\end{itemize}

\section{Репозитории пакетов}
\label{repo}

Источниками пакетов для~установки в~ОС должны служить репозитории,
размещённые на~ресурсах в~сети или на~съёмных носителях информации.
Каждый репозиторий представляет из~себя организованную специальным образом структуру каталогов и файлов, содержащую:

\begin{itemize}
\item{бинарные пакеты для~установки в~ОС;}
\item{пакеты с~исходными текстами (необязательно);}
\item{вспомогательную информацию для~индексирования содержимого репозитория.}
\end{itemize}

Структура вспомогательной информации не~должна подразумевать возможность получения списка файлов в~каталогах репозитория,
поскольку такая функция отсутствует в~некоторых сетевых протоколах, таких~как, например, \EN{HTTP}.
Необходимо включение дополнительной информации, позволяющей выполнять проверку \EN{md5}-суммы и электронной цифровой подписи.
Индексные данные пакетов должны содержать всю~необходимую информацию для~работы вышеописанных операций,
допуская доставку пакета на~локальный компьютер только в~случае его~установки или по~явному запросу пользователя.

Построение вспомогательной информации, предназначенной для~хранения данных о~наборе пакетов в~репозитории,
необходимо подготавливать при~помощи специальной утилиты.
Утилита должна проводить обзор множества пакетов из~указанного каталога и сохранять созданные данные в~предложенном пользователем месте.
Требуется иметь возможность отбирать пакеты для~внесения в~индекс на~основе заданного регулярного выражения.

В~ходе построения вспомогательной информации файлы пакетов явно добавляются как \EN{provides}.
В~силу избыточного их~количества поведение этой функции должно ограничиваться.
Необходимо предусмотреть следующие её~режимы:

\begin{enumerate}

\item {
Регистрировать в~качестве \EN{provides} только файлы,
для~которых найдены соответствующие записи \EN{requires}, \EN{conflicts} и \EN{obsoletes}.
Такое поведение возможно, если характер репозитория подразумевает полноту множества хранимых пакетов,
 и использование других источников маловероятно.
}

\item {
Регистрация в~качестве \EN{provides} только файлов из~указанного списка каталогов.
}

\item {
Регистрация всех файлов.
}

\end{enumerate}

Репозиторий подключается к~системе путём его~регистрации в~конфигурационных файлах.
Индексная информация о~пакетах после подключения загружается и регистрируется по~явной команде пользователя.
При~указании репозитория необходимо иметь возможность назначить репозиторию приоритет в~виде целого неотрицательного числа,
на~основе которого будет приниматься решения о~выборе кандидата для~установки при~наличии одного и~того~же пакета в~нескольких репозиториях.

\section{Конфигурационные возможности}

Работа операций для~манипуляции пакетами и получения информации о~них должна регулироваться набором конфигурационных файлов.
Множество конфигурационных файлов разделяется на~следующие группы:

\begin{itemize}
\item{основные конфигурационные параметры;}
\item {подключенные репозитории пакетов с~указанием приоритетов их~использования;}
\item {зарегистрированные ключи авторов для~проверки цифровых подписей;}
\item{необходимые конфигурационные параметры для~дополнительных возможностей, описанных в~разд.~\ref{advfeatures}.}
\end{itemize}

Желательно, чтобы параметры каждой группы были вынесены в~отдельный файл с~возможностью 
сборки его окончательного варианта на~основе фрагментов, размещённых в~отдельном каталоге.
Каждая утилита из~состава комплекта должна быть снабжена параметром командной строки,
указывающей положение конфигурационной информации,
а~также параметром, позволяющим выполнить чтение конфигурации и вывести его на~стандартный поток вывода (возможно, в~формате самого конфигурационного файла). 
При~пробном чтении конфигурационной информации в~выводе необходимо    отображать 
полный набор параметров, включая не~заданные пользователем в~конфигурационных файлах, с~их~значениями  по~умолчанию.

Основные параметры должны включать в~себя:

\begin{itemize}
\item {текущую архитектуру системы;}
\item {параметры загрузки файлов из~сети (прокси-сервер и~пр.);}
\item {набор опций командной строки для~каждой операции, которые должны быть неявно использованы при~всех запусках;}
\item {параметры кэширования пакетов, загруженных из~сети (положение каталога для~файлов и его~максимальный размер).}
\end{itemize}
